import{a as wt,c as It,e as Et,f as Ot}from"./chunk-TGKLQ66T.js";import{a as bt}from"./chunk-U2TP7XUP.js";import"./chunk-SGYCFQGT.js";import{a as _t,b as vt}from"./chunk-I5AFZ5CK.js";import{a as Mt,b as Pt,c as St,d as yt}from"./chunk-OSDOAGXE.js";import{b as J,c as K,d as Q}from"./chunk-2CBOJU2A.js";import{a as ft,c as gt,f as S}from"./chunk-46IM453T.js";import{a as rt}from"./chunk-QX2SQEXG.js";import"./chunk-6SWKQECH.js";import{a as nt,b as d,d as at,e as mt,h as ct,i as lt,j as pt,k as dt,m as st,o as ut,p as xt,s as ht,t as Ct}from"./chunk-JO5PRQ2J.js";import{$a as D,Ab as V,Ba as m,Bb as z,Fa as x,Gc as W,Ic as X,Kc as b,La as v,Pa as f,Pb as A,Sb as G,T as k,Tb as U,Va as l,Vb as q,Wb as H,Y as w,Z as I,Za as E,_a as j,a as F,ab as L,b as B,bb as o,cb as i,d as u,db as p,ea as N,eb as R,fa as T,gb as h,hb as C,kb as $,qd as Y,sb as a,sd as Z,tb as _,td as M,ub as O,ud as tt,vd as P,xd as et,yd as it,za as g,zd as ot}from"./chunk-KJXX4TUL.js";var y=(()=>{class r{constructor(t,e){this.firestore=t,this.storage=e,this.collectionRef=M(this.firestore,"products")}uploadImage(t,e){return u(this,null,function*(){let n=`products/${e}/${t.name}`,c=Et(this.storage,n);return yield Ot(c,t),yield It(c)})}create(t){let e=et(),n=P(M(e,"products"));return it(n,B(F({},t),{id:n.id}))}getAll(){let t=M(this.firestore,"products");return Z(t,{idField:"id"})}update(t,e){return u(this,null,function*(){let n=P(this.firestore,`products/${t}`);yield ot(n,e)})}delete(t){return u(this,null,function*(){let e=P(this.firestore,`products/${t}`);yield tt(e)})}static{this.\u0275fac=function(e){return new(e||r)(w(Y),w(wt))}}static{this.\u0275prov=k({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function Dt(r,s){if(r&1&&(o(0,"mat-option",21)(1,"div",22),p(2,"img",23),o(3,"span"),a(4),i()()()),r&2){let t=s.$implicit;l("value",t),m(2),l("src",t,g),m(2),_(t.split("/").pop())}}function Lt(r,s){if(r&1&&(o(0,"div",24),p(1,"img",25),i()),r&2){let t,e=C();m(),l("src",(t=e.form.get("image"))==null?null:t.value,g)}}var Bt=(()=>{class r{constructor(t,e,n,c){this.fb=t,this.snackBar=e,this.location=n,this.productService=c,this.categories=["Blusa","Bermuda","Cal\xE7a"],this.sizes=["P","M","G","GG","36","38","40","42"],this.colors=["Preto","Branco","Azul","Vermelho","Verde"],this.selectedImage="",this.allImages=[],this.form=this.fb.group({name:["",[d.required]],description:["",[d.required]],price:[0,[d.required,d.min(1)]],category:["",[d.required]],size:[""],color:[""],image:["",[d.required]],status:[],discount:[]}),this.generateImages()}generateImages(){let t=["blusas","bermudas","calcas"];for(let e of t)for(let n=1;n<=5;n++)this.allImages.push(`assets/images/${e}/${n}.jpg`)}onImageSelect(t){this.selectedImage=t,this.form.patchValue({image:t})}onSubmit(){return u(this,null,function*(){if(this.form.invalid){this.snackBar.open("Preencha todos os campos obrigat\xF3rios.","Fechar",{duration:3e3});return}let t=this.form.value;try{yield this.productService.create(t),this.snackBar.open("Produto cadastrado com sucesso!","Fechar",{duration:3e3}),this.form.reset(),this.selectedImage=""}catch(e){console.error(e),this.snackBar.open("Erro ao cadastrar o produto.","Fechar",{duration:3e3})}})}onCancel(){this.location.back()}static{this.\u0275fac=function(e){return new(e||r)(x(st),x(bt),x(A),x(y))}}static{this.\u0275cmp=v({type:r,selectors:[["app-product-form"]],decls:46,vars:4,consts:[[1,"form-page"],[1,"form-card"],[1,"form-title"],[1,"form-grid",3,"ngSubmit","formGroup"],["appearance","outline",1,"full"],["matInput","","formControlName","name"],["matInput","","rows","3","formControlName","description"],["appearance","outline",1,"half"],["matInput","","type","number","formControlName","price"],["matInput","","type","number","formControlName","discount"],["formControlName","category"],["value","blusas"],["value","bermudas"],["value","calcas"],["matInput","","formControlName","status"],["formControlName","image"],[3,"value",4,"ngFor","ngForOf"],["class","image-preview full",4,"ngIf"],[1,"button-group","full"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-stroked-button","","color","warn","type","button",3,"click"],[3,"value"],[1,"image-option"],[3,"src"],[1,"image-preview","full"],["alt","Preview da imagem",3,"src"]],template:function(e,n){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),a(3,"Cadastrar Produto"),i(),o(4,"form",3),h("ngSubmit",function(){return n.onSubmit()}),o(5,"mat-form-field",4)(6,"mat-label"),a(7,"Nome do Produto"),i(),p(8,"input",5),i(),o(9,"mat-form-field",4)(10,"mat-label"),a(11,"Descri\xE7\xE3o"),i(),p(12,"textarea",6),i(),o(13,"mat-form-field",7)(14,"mat-label"),a(15,"Pre\xE7o"),i(),p(16,"input",8),i(),o(17,"mat-form-field",7)(18,"mat-label"),a(19,"Desconto (%)"),i(),p(20,"input",9),i(),o(21,"mat-form-field",7)(22,"mat-label"),a(23,"Categoria"),i(),o(24,"mat-select",10)(25,"mat-option",11),a(26,"Blusas"),i(),o(27,"mat-option",12),a(28,"Bermudas"),i(),o(29,"mat-option",13),a(30,"Cal\xE7as"),i()()(),o(31,"mat-form-field",7)(32,"mat-label"),a(33,"Status"),i(),p(34,"input",14),i(),o(35,"mat-form-field",4)(36,"mat-label"),a(37,"Imagem"),i(),o(38,"mat-select",15),f(39,Dt,5,3,"mat-option",16),i()(),f(40,Lt,2,1,"div",17),o(41,"div",18)(42,"button",19),a(43,"Salvar"),i(),o(44,"button",20),h("click",function(){return n.onCancel()}),a(45,"Cancelar"),i()()()()()),e&2){let c;m(4),l("formGroup",n.form),m(35),l("ngForOf",n.allImages),m(),l("ngIf",(c=n.form.get("image"))==null?null:c.value),m(2),l("disabled",n.form.invalid)}},dependencies:[U,G,ut,ct,nt,lt,at,mt,pt,dt,Ct,ht,xt,vt,_t,yt,St,Mt,S,b,X,Pt,J],styles:["[_nghost-%COMP%]{display:block;padding-top:80px;background-color:#f4f6f8;min-height:100vh}.form-page[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:32px 16px}.form-card[_ngcontent-%COMP%]{width:100%;max-width:700px;background-color:#fff;border-radius:16px;padding:32px;box-shadow:0 10px 30px #0000001a}.form-title[_ngcontent-%COMP%]{text-align:center;font-size:26px;margin-bottom:24px;font-weight:600;color:#3f51b5}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.full[_ngcontent-%COMP%]{grid-column:span 2}.half[_ngcontent-%COMP%]{grid-column:span 1}.image-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.image-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border-radius:4px}.image-preview[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:250px;border-radius:12px;box-shadow:0 4px 12px #0003}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;margin-top:8px}@media (max-width: 700px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.full[_ngcontent-%COMP%], .half[_ngcontent-%COMP%]{grid-column:span 1}.button-group[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return r})();function Rt(r,s){r&1&&(o(0,"div",3)(1,"span"),a(2,"Sale"),i()())}function $t(r,s){if(r&1&&(o(0,"span",10),a(1),i()),r&2){let t=C().$implicit;m(),O("$ ",t.discount,"")}}function Vt(r,s){if(r&1){let t=R();o(0,"mat-card")(1,"div",1)(2,"figure",2),f(3,Rt,3,0,"div",3),p(4,"img",4),i()(),o(5,"mat-card-content",5)(6,"div",6)(7,"div")(8,"p",7),a(9),i(),o(10,"p",8),a(11),i()(),o(12,"div",9),f(13,$t,2,1,"span",10),o(14,"span"),a(15),V(16,"currency"),i()(),o(17,"button",11),h("click",function(){let n=N(t).$implicit,c=C();return T(c.addProductToCart(n))}),o(18,"mat-icon"),a(19,"add_shopping_cart"),i()()()()()}if(r&2){let t=s.$implicit;m(3),E(t.status==="sale"?3:-1),m(),$("alt",t.name),l("src",t.image,g),m(5),_(t.name),m(2),_(t.description),m(2),E(t.discounted==="discounted"?13:-1),m(2),O(" ",z(16,7,t.price,"BRL"),"")}}var kt=(()=>{class r{constructor(){this.cartService=I(rt),this.productService=I(y)}ngOnInit(){this.getAll()}addProductToCart(t){this.cartService.addProduct(t)}getAll(){this.productService.getAll().subscribe(t=>{this.products=t})}trackByProduct(t,e){return e.id}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=v({type:r,selectors:[["app-products-list"]],decls:3,vars:0,consts:[[1,"parent"],[1,"media-grid"],[1,"product-figure"],[1,"product-badge"],["height","245px",3,"src","alt"],[1,"pa-1"],[1,"product-details"],[1,"ma-0"],[1,"ma-0","pa-0","text-md"],[1,"mat-text-primary","text-xl"],[1,"strikethrough","mat-text-muted","text-sm"],["mat-icon-button","","color","accent",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0),D(1,Vt,20,10,"mat-card",null,j),i()),e&2&&(m(),L(n.products))},dependencies:[S,ft,gt,b,W,Q,K,H,q],styles:[".parent[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-around}mat-card[_ngcontent-%COMP%]{width:300px;margin:15px}.product-details[_ngcontent-%COMP%]{display:flex;flex-flow:row;justify-content:space-between;align-items:center}.media-grid[_ngcontent-%COMP%]{text-align:center;overflow:hidden}.product-figure[_ngcontent-%COMP%]{background-color:#fff;height:245px}.product-badge[_ngcontent-%COMP%]{color:#fff;text-align:center;position:absolute;font-weight:700;border-top:30px solid #7CB342;border-bottom:30px solid transparent;border-right:30px solid transparent;border-left:30px solid #7CB342;top:0;left:0;z-index:100}.product-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;transform:rotate(-45deg);top:-18px;left:-25px;white-space:nowrap}"]})}}return r})();var be=[{path:"",component:kt},{path:"new",component:Bt}];export{be as PRODUCT_ROUTES};
