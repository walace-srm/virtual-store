import{Eb as p,Lc as P,Nb as i,Ob as o,Pb as u,Vb as m,Vc as x,Wb as f,Yc as h,db as s,fb as c,fc as r,kb as d,qb as l,ub as g}from"./chunk-G5HKJUTV.js";function _(n,b){if(n&1&&(i(0,"div")(1,"h3"),r(2,"Escaneie o QR Code para pagar com Pix:"),o(),u(3,"img",3),o()),n&2){let t=f();c(3),p("src","data:image/png;base64,"+t.qrCodeBase64,s)}}var E=(()=>{class n{constructor(t){this.http=t,this.qrCodeBase64=null}iniciarPagamento(){let t={descricao:"Produto de teste",preco:100,quantidade:1};this.http.post("http://localhost:3000/api/pagamento/criar-preferencia",t).subscribe({next:e=>{e?.id?window.location.href=`https://www.mercadopago.com.br/checkout/v1/redirect?preference_id=${e.id}`:console.error("Prefer\xEAncia sem ID")},error:e=>{console.error("Erro ao criar prefer\xEAncia",e)}})}iniciarPagamentoPix(){let t={descricao:"Produto de teste",preco:100};this.http.post("http://localhost:3000/api/pagamento/criar-pagamento-pix",t).subscribe({next:e=>{this.qrCodeBase64=e.qr_code_base64},error:e=>{console.error("Erro ao criar pagamento Pix",e)}})}static{this.\u0275fac=function(e){return new(e||n)(d(P))}}static{this.\u0275cmp=l({type:n,selectors:[["app-payment"]],decls:8,vars:1,consts:[[1,"pagamento-container"],[3,"click"],[4,"ngIf"],["alt","QR Code Pix",2,"max-width","300px",3,"src"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"h2"),r(2,"Pagamento com Mercado Pago"),o(),i(3,"button",1),m("click",function(){return a.iniciarPagamento()}),r(4,"Pagar com Checkout Pro"),o()(),i(5,"button",1),m("click",function(){return a.iniciarPagamentoPix()}),r(6,"Pagar com Pix"),o(),g(7,_,4,1,"div",2)),e&2&&(c(7),p("ngIf",a.qrCodeBase64))},dependencies:[h,x],styles:[".pagamento-container[_ngcontent-%COMP%]{text-align:center;margin-top:50px}.pagamento-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;background-color:#009ee3;color:#fff;border:none;border-radius:6px;font-size:16px;cursor:pointer}.pagamento-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#007bb8}"]})}}return n})();export{E as PaymentComponent};
