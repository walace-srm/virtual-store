import{a as Jt,c as Xt,e as te,f as ee,g as me,i as le,k as de,l as pe}from"./chunk-YIBD5YZN.js";import{a as T}from"./chunk-7FWF4TYF.js";import"./chunk-RGMJOE4E.js";import{b as Tt,c as J,d as X,e as rt}from"./chunk-XV54UEF3.js";import{a as Gt,c as lt,d as Ut,e as it,f as qt,g as N,i as Qt,j as Ht,k as Yt,l as Kt,m as Zt}from"./chunk-NXMXN6EW.js";import{f as Z,h as k,i as Ot}from"./chunk-MOI3FQ7I.js";import{a as re,b as ne}from"./chunk-UPE3Q43W.js";import{a as oe,b as ae,c as ce,d as se}from"./chunk-MF45M3HI.js";import"./chunk-KJOUKZK3.js";import{a as nt,c as ie,f as E}from"./chunk-PGYLOOMK.js";import"./chunk-HHMP4W5Q.js";import"./chunk-2I5WXUWE.js";import{$ as Rt,G as Et,N as tt,P as et,R as I,T as Bt,U as O,W as Ft,X as Dt,aa as Lt,ca as Nt,da as zt,fa as At,ha as jt,ia as Vt,la as $t,ma as Wt}from"./chunk-SM4RLQF5.js";import{Cc as H,Eb as P,Fb as s,Gb as z,Ha as vt,Hb as A,Ib as Pt,Ja as Ct,Ob as n,Pa as bt,Pb as o,Qb as u,Rb as D,Sb as R,Tb as j,Ub as L,Uc as kt,Wb as f,Wc as S,Xb as g,Xc as w,Yc as It,Zc as Y,_b as V,_c as K,a as ut,ac as $,b as gt,bc as W,cc as G,da as ft,db as h,e as b,ea as _t,fb as yt,fc as v,ga as ht,gb as a,gc as c,hc as _,ia as st,ic as U,ja as d,lb as F,pc as St,qc as q,rb as x,rc as Q,sa as y,sb as Mt,sc as C,ta as M,ua as mt,va as xt,vb as p,yc as wt}from"./chunk-DJROKSHZ.js";var B=(()=>{class i{constructor(t,e){this.firestore=t,this.storage=e}uploadImage(t,e){return b(this,null,function*(){let r=`products/${e}/${t.name}`,m=de(this.storage,r);return yield pe(m,t),yield le(m)})}create(t){let e=Qt(),r=N(it(e,"products"));return Yt(r,gt(ut({},t),{id:r.id}))}getAll(){let t=it(this.firestore,"products");return lt(t,{idField:"id"})}update(t,e){return b(this,null,function*(){let r=N(this.firestore,`products/${t}`);yield Kt(r,e)})}delete(t){return b(this,null,function*(){let e=N(this.firestore,`products/${t}`);yield qt(e)})}getProductsByCategory(t){let e=it(this.firestore,"products"),r=Ht(e,Zt("category","==",t));return lt(r,{idField:"id"})}getProductById(t){let e=N(this.firestore,`products/${t}`);return Ut(e,{idField:"id"})}static{this.\u0275fac=function(e){return new(e||i)(st(Gt),st(me))}}static{this.\u0275prov=ft({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function ve(i,l){if(i&1&&(n(0,"mat-list-option",23)(1,"div",24),u(2,"img",25),n(3,"span"),c(4),o()()()),i&2){let t=l.$implicit;s("value",t),a(2),s("src",t,h),a(2),_(t.split("/").pop())}}function Ce(i,l){if(i&1&&u(0,"img",29),i&2){let t=l.$implicit;s("src",t.value,h)}}function be(i,l){if(i&1&&(n(0,"div",26)(1,"h4"),c(2,"Imagens selecionadas:"),o(),n(3,"div",27),p(4,Ce,1,1,"img",28),o()()),i&2){let t=g();a(4),s("ngForOf",t.images.controls)}}var ge=(()=>{class i{constructor(t,e,r,m){this.fb=t,this.snackBar=e,this.router=r,this.productService=m,this.categories=["Blusa","Bermuda","Cal\xE7a"],this.sizes=["P","M","G","GG","36","38","40","42"],this.colors=["Preto","Branco","Azul","Vermelho","Verde"],this.selectedImage="",this.allImages=[],this.selectedImages=[],this.form=this.fb.group({name:["",[O.required]],description:["",[O.required]],price:[0,[O.required,O.min(1)]],category:["",[O.required]],size:[""],color:[""],images:[],status:[],discount:[]}),this.generateImages()}generateImages(){let t=["blusas","bermudas","calcas"];for(let e of t)for(let r=1;r<=5;r++)this.allImages.push(`assets/images/${e}/${r}.jpg`)}onImageSelect(t){this.selectedImages.includes(t)||(this.selectedImages.push(t),this.form.patchValue({images:this.selectedImages}))}removeImage(t){this.selectedImages=this.selectedImages.filter(e=>e!==t),this.form.patchValue({images:this.selectedImages})}get images(){return this.form.get("images")}onImageToggle(t,e){if(e.checked)this.images.push(this.fb.control(t));else{let m=this.images.controls.findIndex(pt=>pt.value===t);m!==-1&&this.images.removeAt(m)}}onSubmit(){return b(this,null,function*(){if(this.form.invalid){this.snackBar.open("Preencha todos os campos obrigat\xF3rios.","Fechar",{duration:3e3});return}let t=this.form.value;try{yield this.productService.create(t),this.snackBar.open("Produto cadastrado com sucesso!","Fechar",{duration:3e3}),this.form.reset(),this.selectedImage=""}catch(e){console.error(e),this.snackBar.open("Erro ao cadastrar o produto.","Fechar",{duration:3e3})}})}onCancel(){this.router.navigate(["/products"])}static{this.\u0275fac=function(e){return new(e||i)(F(At),F(T),F(k),F(B))}}static{this.\u0275cmp=x({type:i,selectors:[["app-product-form"]],decls:46,vars:4,consts:[[1,"form-page"],[1,"form-card"],[1,"form-title"],[1,"form-grid",3,"ngSubmit","formGroup"],["appearance","outline",1,"full"],["matInput","","formControlName","name"],["matInput","","rows","3","formControlName","description"],["appearance","outline",1,"half"],["matInput","","type","number","formControlName","price"],["matInput","","type","number","formControlName","discount"],["formControlName","category"],["value","blusas"],["value","bermudas"],["value","calcas"],["matInput","","formControlName","status"],[1,"full"],[1,"mat-subheading-2"],["formControlName","images"],["class","mat-list-option",3,"value",4,"ngFor","ngForOf"],["class","image-preview full",4,"ngIf"],[1,"button-group","full"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-stroked-button","","color","warn","type","button",3,"click"],[1,"mat-list-option",3,"value"],[1,"image-option"],["alt","imagem",3,"src"],[1,"image-preview","full"],[1,"preview-list"],[3,"src",4,"ngFor","ngForOf"],[3,"src"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),c(3,"Cadastrar Produto"),o(),n(4,"form",3),f("ngSubmit",function(){return r.onSubmit()}),n(5,"mat-form-field",4)(6,"mat-label"),c(7,"Nome do Produto"),o(),u(8,"input",5),o(),n(9,"mat-form-field",4)(10,"mat-label"),c(11,"Descri\xE7\xE3o"),o(),u(12,"textarea",6),o(),n(13,"mat-form-field",7)(14,"mat-label"),c(15,"Pre\xE7o"),o(),u(16,"input",8),o(),n(17,"mat-form-field",7)(18,"mat-label"),c(19,"Desconto (%)"),o(),u(20,"input",9),o(),n(21,"mat-form-field",7)(22,"mat-label"),c(23,"Categoria"),o(),n(24,"mat-select",10)(25,"mat-option",11),c(26,"Blusas"),o(),n(27,"mat-option",12),c(28,"Bermudas"),o(),n(29,"mat-option",13),c(30,"Cal\xE7as"),o()()(),n(31,"mat-form-field",7)(32,"mat-label"),c(33,"Status"),o(),u(34,"input",14),o(),n(35,"div",15)(36,"p",16),c(37,"Selecione as imagens do produto:"),o(),n(38,"mat-selection-list",17),p(39,ve,5,3,"mat-list-option",18),o()(),p(40,be,5,1,"div",19),n(41,"div",20)(42,"button",21),c(43,"Salvar"),o(),n(44,"button",22),f("click",function(){return r.onCancel()}),c(45,"Cancelar"),o()()()()()),e&2&&(a(4),s("formGroup",r.form),a(35),s("ngForOf",r.allImages),a(),s("ngIf",r.images.length>0),a(2),s("disabled",r.form.invalid))},dependencies:[w,S,jt,Rt,Bt,Lt,Ft,Dt,Nt,zt,Wt,$t,Vt,ne,re,se,ce,oe,E,I,et,ae,Tt,ee,te,Xt],styles:[".form-page[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:32px 16px}.form-card[_ngcontent-%COMP%]{width:100%;max-width:700px;background-color:#fff;border-radius:16px;padding:32px;box-shadow:0 10px 30px #0000001a}.form-title[_ngcontent-%COMP%]{text-align:center;font-size:26px;margin-bottom:24px;font-weight:600;color:#3f51b5}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.full[_ngcontent-%COMP%]{grid-column:span 2}.half[_ngcontent-%COMP%]{grid-column:span 1}.image-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.image-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:auto;border-radius:6px;object-fit:cover}.preview-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.preview-list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;border-radius:4px;border:1px solid #ccc}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;margin-top:8px}mat-list-option[_ngcontent-%COMP%]{margin-bottom:6px}@media (max-width: 700px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.full[_ngcontent-%COMP%], .half[_ngcontent-%COMP%]{grid-column:span 1}.button-group[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return i})();var ye=["determinateSpinner"];function Me(i,l){if(i&1&&(mt(),n(0,"svg",11),u(1,"circle",12),o()),i&2){let t=g();P("viewBox",t._viewBox()),a(),z("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),P("r",t._circleRadius())}}var Pe=new ht("mat-progress-spinner-default-options",{providedIn:"root",factory:Se});function Se(){return{diameter:fe}}var fe=100,we=10,at=(()=>{class i{_elementRef=d(vt);_noopAnimations;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";_determinateCircle;constructor(){let t=d(bt,{optional:!0}),e=d(Pe);this._noopAnimations=t==="NoopAnimations"&&!!e&&!e._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",e&&(e.color&&(this.color=this._defaultColor=e.color),e.diameter&&(this.diameter=e.diameter),e.strokeWidth&&(this.strokeWidth=e.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}_value=0;get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}_diameter=fe;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_strokeWidth;_circleRadius(){return(this.diameter-we)/2}_viewBox(){let t=this._circleRadius()*2+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=x({type:i,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,r){if(e&1&&$(ye,5),e&2){let m;W(m=G())&&(r._determinateCircle=m.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(e,r){e&2&&(P("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",r.mode==="determinate"?r.value:null)("mode",r.mode),Pt("mat-"+r.color),z("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),A("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate",r.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",H],diameter:[2,"diameter","diameter",H],strokeWidth:[2,"strokeWidth","strokeWidth",H]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,r){if(e&1&&(p(0,Me,2,8,"ng-template",null,0,C),n(2,"div",2,1),mt(),n(4,"svg",3),u(5,"circle",4),o()(),xt(),n(6,"div",5)(7,"div",6)(8,"div",7),j(9,8),o(),n(10,"div",9),j(11,8),o(),n(12,"div",10),j(13,8),o()()()),e&2){let m=v(1);a(4),P("viewBox",r._viewBox()),a(),z("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),P("r",r._circleRadius()),a(4),s("ngTemplateOutlet",m),a(2),s("ngTemplateOutlet",m),a(2),s("ngTemplateOutlet",m)}},dependencies:[It],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return i})();var ct=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=Mt({type:i});static \u0275inj=_t({imports:[Et]})}return i})();var Ee=i=>["/products",i];function Te(i,l){i&1&&(D(0),n(1,"div",3),u(2,"mat-spinner"),n(3,"p"),c(4,"Carregando produtos..."),o()(),R())}function Be(i,l){i&1&&(n(0,"div",19)(1,"span"),c(2,"Sale"),o()())}function Fe(i,l){if(i&1&&(n(0,"span",20),c(1),o()),i&2){let t=g().$implicit;a(),U("R$ ",t.discount,"")}}function De(i,l){if(i&1){let t=L();n(0,"mat-card",6)(1,"div",7)(2,"figure",8),p(3,Be,3,0,"div",9),u(4,"img",10),o()(),n(5,"mat-card-content",11)(6,"div",12)(7,"div")(8,"p",13),c(9),o(),n(10,"p",14),c(11),o()(),n(12,"div",15),p(13,Fe,2,1,"span",16),n(14,"span"),c(15),q(16,"currency"),o()(),n(17,"div",17)(18,"button",18),f("click",function(r){let m=y(t).$implicit;return g(3).addProductToCart(m),M(r.stopPropagation())}),n(19,"mat-icon"),c(20,"add_shopping_cart"),o()()()()()()}if(i&2){let t=l.$implicit;s("routerLink",St(11,Ee,t.id)),a(3),s("ngIf",t.status==="sale"),a(),V("alt",t.name),s("src",t.images==null?null:t.images[0],h),a(5),_(t.name),a(2),_(t.description),a(2),s("ngIf",t.discounted==="discounted"),a(2),_(Q(16,8,t.price,"BRL"))}}function Re(i,l){if(i&1&&(D(0),n(1,"div",4),p(2,De,21,13,"mat-card",5),o(),R()),i&2){let t=g(2);a(2),s("ngForOf",t.produtosFiltrados)("ngForTrackBy",t.trackByProduct)}}function Le(i,l){if(i&1&&p(0,Re,3,2,"ng-container",2),i&2){let t=g(),e=v(4);s("ngIf",t.produtosFiltrados.length>0)("ngIfElse",e)}}function Ne(i,l){i&1&&(n(0,"div",22)(1,"mat-icon",23),c(2,"inventory_2"),o(),n(3,"p"),c(4,"Nenhum produto encontrado nesta categoria."),o()())}function ze(i,l){if(i&1&&p(0,Ne,5,0,"div",21),i&2){let t=g();s("ngIf",!t.loading())}}var dt=(()=>{class i{constructor(){this.cartService=d(rt),this.productService=d(B),this.searchService=d(Jt),this.route=d(Z),this.router=d(k),this.changeDetector=d(wt),this.snackBar=d(T),this.loading=Ct(!1),this.produtosFiltrados=[]}ngOnInit(){this.listenSearch(),this.filterProductByCategory()}getAll(){this.loading.set(!0),this.productService.getAll().subscribe(t=>{this.products=t,this.produtosFiltrados=t,this.loading.set(!1)})}listenSearch(){this.searchService.searchTerm$.subscribe(t=>{let e=t.toLowerCase().trim();this.products&&(this.produtosFiltrados=this.products.filter(r=>r.name.toLowerCase().includes(e)))})}addProductToCart(t){this.cartService.addProduct(t),this.snackBar.open(`${t.name} adicionado ao carrinho!`,"Ir para o carrinho",{duration:1e4,verticalPosition:"bottom",horizontalPosition:"center"}).onAction().subscribe(()=>{this.router.navigate(["/cart"])})}filterProductByCategory(){this.route.paramMap.subscribe(t=>{let e=t.get("category");e?this.loadProductsByCategory(e):this.getAll()})}loadProductsByCategory(t){this.productService.getProductsByCategory(t).subscribe(e=>{this.products=e,this.produtosFiltrados=e,this.loading.set(!1),this.changeDetector.detectChanges()})}trackByProduct(t,e){return e.id}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=x({type:i,selectors:[["app-products-list"]],decls:5,vars:2,consts:[["content",""],["emptyState",""],[4,"ngIf","ngIfElse"],[1,"loading-container"],[1,"parent"],[3,"routerLink",4,"ngFor","ngForOf","ngForTrackBy"],[3,"routerLink"],[1,"media-grid"],[1,"product-figure"],["class","product-badge",4,"ngIf"],["height","245px",3,"src","alt"],[1,"pa-1"],[1,"product-details"],[1,"ma-0"],[1,"ma-0","pa-0","text-md"],[1,"mat-text-primary","text-xl"],["class","strikethrough mat-text-muted text-sm",4,"ngIf"],[1,"add-to-cart-btn"],["mat-icon-button","","color","accent","matTooltip","Adicionar ao carrinho",3,"click"],[1,"product-badge"],[1,"strikethrough","mat-text-muted","text-sm"],["class","empty-container",4,"ngIf"],[1,"empty-container"],[1,"empty-icon"]],template:function(e,r){if(e&1&&p(0,Te,5,0,"ng-container",2)(1,Le,1,2,"ng-template",null,0,C)(3,ze,1,1,"ng-template",null,1,C),e&2){let m=v(2);s("ngIf",r.loading())("ngIfElse",m)}},dependencies:[K,S,w,Y,Ot,E,nt,ie,I,tt,X,J,ct,at],styles:[".parent[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-around}mat-card[_ngcontent-%COMP%]{width:300px;margin:15px;cursor:pointer}.product-details[_ngcontent-%COMP%]{display:flex;flex-flow:row;justify-content:space-between;align-items:center}.media-grid[_ngcontent-%COMP%]{text-align:center;overflow:hidden}.product-figure[_ngcontent-%COMP%]{background-color:#fff;height:245px}.product-badge[_ngcontent-%COMP%]{color:#fff;text-align:center;position:absolute;font-weight:700;border-top:30px solid #7CB342;border-bottom:30px solid transparent;border-right:30px solid transparent;border-left:30px solid #7CB342;top:0;left:0;z-index:100}.product-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;transform:rotate(-45deg);top:-18px;left:-25px;white-space:nowrap}.loading-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fffc;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:999;gap:16px;text-align:center;color:#3f51b5;font-weight:500}.empty-container[_ngcontent-%COMP%]{display:flex;height:70vh;flex-direction:column;align-items:center;justify-content:center;padding:4rem 1rem;text-align:center;color:#888}.empty-container[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:1rem;color:#ccc}.empty-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}mat-card[_ngcontent-%COMP%]{position:relative;transition:transform .2s ease-in-out}mat-card[_ngcontent-%COMP%]:hover{transform:scale(1.01)}.add-to-cart-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;opacity:0;transform:translateY(-10px);transition:opacity .3s ease,transform .3s ease;z-index:10}mat-card[_ngcontent-%COMP%]:hover   .add-to-cart-btn[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}@media (hover: none) and (pointer: coarse){.add-to-cart-btn[_ngcontent-%COMP%]{opacity:1!important;transform:translateY(0)!important;position:absolute;top:8px;right:8px}}"]})}}return i})();var Ae=["titleTrigger"];function je(i,l){i&1&&(n(0,"div",19)(1,"h2"),c(2,"Detalhes do produto"),o()())}function Ve(i,l){if(i&1&&(D(0),n(1,"span",20),c(2),o(),R()),i&2){let t=g(2);a(2),U("R$ ",t.product.discount,"")}}function $e(i,l){if(i&1){let t=L();n(0,"div",21)(1,"img",22),f("click",function(){let r=y(t).$implicit,m=g(2);return M(m.selectImage(r))}),o()()}if(i&2){let t=l.$implicit;a(),s("src",t,h)}}function We(i,l){if(i&1){let t=L();n(0,"div",4)(1,"mat-card",5)(2,"div",6)(3,"button",7),f("click",function(){y(t);let r=g();return M(r.goBack())}),n(4,"mat-icon"),c(5,"arrow_back"),o()(),p(6,je,3,0,"div",8),o(),n(7,"div",9),u(8,"img",10),o(),n(9,"div",11)(10,"h2"),c(11),o(),n(12,"p",12),c(13),o(),n(14,"div",13),p(15,Ve,3,1,"ng-container",14),n(16,"span",15),c(17),q(18,"currency"),o()(),n(19,"button",16),f("click",function(){y(t);let r=g();return M(r.addToCart(r.product))}),n(20,"mat-icon"),c(21,"add_shopping_cart"),o(),c(22," Adicionar ao carrinho "),o()(),n(23,"div",17),p(24,$e,2,1,"div",18),o()()()}if(i&2){let t=g();a(2),A("scrolled",t.isScrolled),a(4),s("ngIf",!t.isScrolled),a(2),V("alt",t.product.name),s("src",t.selectedImage,h),a(3),_(t.product.name),a(2),_(t.product.description),a(2),s("ngIf",t.product.discounted==="discounted"),a(2),_(Q(18,11,t.product.price,"BRL")),a(7),s("ngForOf",t.product.images)("ngForTrackBy",t.trackByIndex)}}function Ge(i,l){i&1&&(n(0,"div",23),u(1,"mat-spinner"),n(2,"p"),c(3,"Carregando produto..."),o()())}var he=(()=>{class i{constructor(){this.route=d(Z),this.productService=d(B),this.cartService=d(rt),this.snackBar=d(T),this.location=d(kt),this.router=d(k),this.product=null,this.isLoading=!0,this.selectedImage="",this.isScrolled=!1}onScroll(){let t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;this.isScrolled=t>64}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&this.productService.getProductById(t).subscribe(e=>{this.product=e,this.isLoading=!1,this.product?.images?.length&&(this.selectedImage=this.product.images[0])})}ngAfterViewInit(){this.titleTrigger?.nativeElement&&new IntersectionObserver(([e])=>{this.isScrolled=!e.isIntersecting},{root:null,threshold:0}).observe(this.titleTrigger.nativeElement)}selectImage(t){this.selectedImage=t}addToCart(t){this.cartService.addProduct(t),this.snackBar.open(`${t.name} adicionado ao carrinho!`,"Ir para o carrinho",{duration:1e4,verticalPosition:"bottom",horizontalPosition:"center"}).onAction().subscribe(()=>{this.router.navigate(["/cart"])})}goBack(){this.location.back()}trackByIndex(t,e){return t}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=x({type:i,selectors:[["app-products-detail"]],viewQuery:function(e,r){if(e&1&&$(Ae,7),e&2){let m;W(m=G())&&(r.titleTrigger=m.first)}},hostBindings:function(e,r){e&1&&f("scroll",function(){return r.onScroll()},!1,yt)},decls:5,vars:2,consts:[["titleTrigger",""],["loading",""],[2,"height","1px"],["class","detail-container",4,"ngIf","ngIfElse"],[1,"detail-container"],[1,"detail-card"],[1,"container-title"],["mat-icon-button","",3,"click"],["class","title-text",4,"ngIf"],[1,"image-section"],[1,"main-image",3,"src","alt"],[1,"info-section"],[1,"description"],[1,"price-section"],[4,"ngIf"],[1,"current-price"],["mat-raised-button","","color","primary",3,"click"],[1,"image-gallery"],["class","thumbnail",4,"ngFor","ngForOf","ngForTrackBy"],[1,"title-text"],[1,"old-price"],[1,"thumbnail"],["alt","imagem do produto",3,"click","src"],[1,"loading-container"]],template:function(e,r){if(e&1&&(u(0,"div",2,0),p(2,We,25,14,"div",3)(3,Ge,4,0,"ng-template",null,1,C)),e&2){let m=v(4);a(2),s("ngIf",!r.isLoading&&r.product)("ngIfElse",m)}},dependencies:[K,S,w,Y,E,nt,ct,at,X,J,I,et,tt],styles:[".detail-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px}.container-title[_ngcontent-%COMP%]{position:sticky;top:40px;background-color:#fff;z-index:10;display:flex;align-items:center;gap:8px;padding-bottom:8px;transition:background-color .4s ease-in-out,border-bottom .4s ease-in-out}.container-title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{z-index:11;border:none;background:none}.container-title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{flex:1;text-align:center;transition:opacity .4s ease-in-out,visibility .4s ease-in-out}.container-title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;transition:opacity .4s ease-in-out,visibility .4s ease-in-out}.container-title.scrolled[_ngcontent-%COMP%]{background-color:transparent;border-bottom:none}.container-title.scrolled[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{opacity:0;visibility:hidden}.detail-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:800px}.image-section[_ngcontent-%COMP%]{text-align:center;margin-top:28px}.main-image[_ngcontent-%COMP%]{max-width:100%;width:400px;height:auto;border-radius:8px;box-shadow:0 2px 8px #0000001a;object-fit:cover}.image-gallery[_ngcontent-%COMP%]{display:flex;justify-content:start;margin-top:15px;overflow-x:auto}.thumbnail[_ngcontent-%COMP%]{margin-right:10px;cursor:pointer}.thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px;object-fit:cover;border-radius:4px;border:2px solid transparent;transition:transform .3s,border-color .3s}.thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.1);border-color:#1976d2}button.mat-raised-button[_ngcontent-%COMP%]:hover{background-color:#1976d2;transform:scale(1.05)}.detail-card[_ngcontent-%COMP%]{padding:20px}.info-section[_ngcontent-%COMP%]{padding-top:10px}h2[_ngcontent-%COMP%]{margin-bottom:15px;font-size:24px;font-weight:600}p.description[_ngcontent-%COMP%]{margin-bottom:15px;font-size:16px;line-height:1.6}.price-section[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px}.current-price[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#4caf50}.old-price[_ngcontent-%COMP%]{font-size:16px;color:#999;text-decoration:line-through}.loading-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fffc;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:999;gap:16px;text-align:center;color:#3f51b5;font-weight:500}"]})}}return i})();var tr=[{path:"",component:dt},{path:"new",component:ge},{path:":id",component:he},{path:"category/:category",component:dt}];export{tr as PRODUCT_ROUTES};
